<script>
    function excluir(id){
        console.log(id);
        let obj = {
            id: id
        }

        fetch('/voluntarios/excluir', {
            method: 'POST',
            body: JSON.stringify(obj),
            headers: {
                "Content-Type": "application/json",
            }
        }).then(r=> {
            return r.json();
        }).then(r=> {
            if(r.ok) {
                window.location.reload();
            }   
            else {
                alert(r.msg);
            }
        })
    }
</script>
<body>
    <div class="d-flex flex-column">
        <h6>Cadastrar novo Voluntario:</h6>
        <a href="/voluntarios/cadastrar" class="btn btn-success w-25 mt-2">Cadastrar</a>
    </div>
    <div>
        <table class="table table-striped table-hover mt-2">
            <thead>
                 <tr>
                    <th>id</th>
                     <th>Nome</th>
                     <th>Email</th>
                     <th>Telefone</th>
                     <th>Data de Nascimento</th>
                     <th>Ação</th>
                 </tr>
            </thead>
            <tbody>
                <% for (let i = 0; i < lista.length; i++)  { %>
                    <tr>
                        <td><%= lista[i].voluntarioId %></td>
                        <td><%= lista[i].voluntarioNome %></td>
                        <td><%= lista[i].voluntarioEmail %></td>
                        <td><%= lista[i].voluntarioTelefone %></td>
                        <td><%= lista[i].voluntarioNasc %></td>
                        <td>
                            <a class="btn btn-primary" href="/voluntarios/alterar/<%= lista[i].voluntarioId %>"><i class="fas fa-pen"></i></a>
                            <button class="btn btn-danger btnExclusao" onclick="excluir(<%= lista[i].voluntarioId %>)" ><i class="fas fa-trash"></i></button>
                        </td>
                    </tr>
                <% } %>
            </tbody>
         </table>
    </div>
</body>